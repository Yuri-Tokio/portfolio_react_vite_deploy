name: tokiodev.com deployment

on:
    push:
        branches: [main]
    
    workflow_dispatch:

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
          - name: Using Node.js
            uses: actions/setup-node@v2
            with:
              node-version: 20.
          - name: build aplication
            run: npm run build

    deploy-development:
        runs-on: ubuntu-latest
        environment: 
            name: development
            url: https://tokiodev.com
        needs: build
        steps:
            - name: Repo Checkout
              uses: actions/chekout@v3
            - name: Hostinger Deployment
              uses: easingthemes/ssh-deploy@main
              with:
                SSH_PRIVATE_KEY: ${{secrets.SERVER_SSH_KEY}}
                ARGS: "-rlgoDzvc --delete"
                SOURCE: "dist/"
                REMOTE_HOST: ${{vars.REMOTE_HOST}}
                REMOTE_USER: ${{vars.REMOTE_USER}}
                REMOTE_PORT: ${{vars.REMOTE_PORT}}
                TARGET: ./domains/tokiodev.com/public_html/